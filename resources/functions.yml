results:
  handler: src/handler.getResults
  events:
    - http:
        path: /results
        method: GET
getResultDetails:
  handler: src/handler.getResultDetails
  events:
    - http:
        path: /results/{teamId}/details
        method: GET
        authorizer:
          arn: ${self:custom.config.${self:provider.stage}.cognitoUserPoolArn}
getLatestExecutionpiUrl:
  handler: src/handler.getLatestExecution
  events:
    - http:
        path: /teams/{teamId}/executions/latest
        method: GET
        authorizer:
          arn: ${self:custom.config.${self:provider.stage}.cognitoUserPoolArn}
getApiUrl:
  handler: src/handler.getApiUrl
  events:
    - http:
        path: /teams/{teamId}/apiUrl
        method: GET
        authorizer:
          arn: ${self:custom.config.${self:provider.stage}.cognitoUserPoolArn}
putApiUrl:
  handler: src/handler.putApiUrl
  events:
    - http:
        path: /teams/{teamId}/apiUrl
        method: PUT
        authorizer:
          arn: ${self:custom.config.${self:provider.stage}.cognitoUserPoolArn}
postTestRequest:
  handler: src/handler.postTestRequest
  events:
    - http:
        path: /teams/{teamId}/testRequests
        method: POST
        authorizer:
          arn: ${self:custom.config.${self:provider.stage}.cognitoUserPoolArn}
getTestRequest:
  handler: src/handler.getTestRequest
  events:
    - http:
        path: /testRequest
        method: GET
        request:
          parameters:
            querystrings:
              cloudProvider: false
              region: false
postTestResults:
  handler: src/handler.postTestResults
  events:
    - http:
        path: /testResults
        method: POST
preTokenGeneration:
  handler: src/handler.preTokenGeneration
  events:
    - cognitoUserPool:
        pool: ${self:custom.config.${self:provider.stage}.cognitoUserPoolName}
        trigger: PreTokenGeneration
        existing: true
calculateScores:
  handler: src/handler.calculateScores
  events:
    - schedule: cron(* * * * ? *)
    - http:
        path: /calculateRes
        method: GET
getMessages:
  handler: src/handler.getMessages
  events:
    - http:
        path: /messages
        method: GET
        authorizer:
          arn: ${self:custom.config.${self:provider.stage}.cognitoUserPoolArn}
postMessage:
  handler: src/handler.postMessage
  events:
    - http:
        path: /messages/create
        method: POST
        authorizer:
          arn: ${self:custom.config.${self:provider.stage}.cognitoUserPoolArn}
getTests:
  handler: src/handler.getTests
  events:
    - http:
        path: /test
        method: GET